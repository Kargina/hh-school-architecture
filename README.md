# hh-school-architecture

1. Представим, что у нас есть данные, которые мы очень часто читаем по сравнению с другими(например словарь стран). Как можно это оптимизировать?
    1. Кешировать запросы, хранить их в памяти(memcached, redis)
    2. Кеширование на стороне nginx. Обычно применяется для кеширования статики, например, если словарь стран - это одна страница сайта.


2. Что можно сделать, если таблица вакансий стала слишком большой? Какие есть решения на уровне текущей базы данных? Можно ли ее чем то заменить?
    1. Поставить диски побольше :)
    2. Вынести таблицу на отдельный сервер
    3. Использовать шардирование и разнести данные из таблицы по разным серверам. В этом случае можно разделить по принципу активная вакансия или нет. Тогда на сервере(серверах) с активными вакансиями будет их меньше, а доступ к ним нужен постоянный и на чтение и на изменение, а на сервере(серверах) с неактивными вакансиями их будет больше, а доступ к ним нужен только на чтение.
    4. Если есть проблемы со скоростью чтения - поднять реплики и читать с них

3. Какие вы видите узкие места, возможно неправильно выбранные технологии в текущей схеме(на примере настоящего hh.ru)  
   1. ```
      ➜  ~ dig +short hh.ru
      94.124.200.0
      ➜  ~ dig +short headhunter.ru
      94.124.200.1
      ```` 
      Вероятно, за доменом находится некий балансировщик, который балансирует входящий трафик на nginx с нашей схемы. Тут есть проблема в том, что мы отдаем клиенту только один IP. Если мы захотим сменить IP, или если ДЦ будет недоступен, сайт перестанет работать. Нужно отдавать клиенту несколько IP с разных ДЦ, чтобы иметь возможность “потерять” любой из них  
   2. Для общения внутренних сервисов друг с другом стоит выбрать протобаф, это даст прирост к скорости передачи и уменьшит трафик.
   